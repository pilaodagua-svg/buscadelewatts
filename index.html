<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BovinoTech Santiago</title>
    <style>
        :root { --primary: #2e7d32; --vet: #1565c0; --bg: #f1f8e9; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; padding: 20px; }
        .container { max-width: 600px; margin: auto; }
        
        header { text-align: center; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .btn { display: block; width: 100%; padding: 15px; margin: 10px 0; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; text-decoration: none; text-align: center; box-sizing: border-box; }
        .btn-add { background: var(--primary); color: white; font-size: 1.1rem; }
        .btn-lang { background: #eee; color: #333; padding: 5px; font-size: 0.8rem; width: auto; display: inline-block; }

        .card { background: white; border-radius: 12px; overflow: hidden; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .card img { width: 100%; height: 250px; object-fit: cover; }
        .card-body { padding: 15px; }
        .price { font-size: 1.6rem; color: var(--primary); font-weight: 800; }
        
        .stats { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; background: #f9f9f9; padding: 12px; border-radius: 8px; margin: 10px 0; }
        .status { float: right; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: bold; background: #e8f5e9; color: #2e7d32; }

        .btn-vet { background: white; border: 2px solid var(--vet); color: var(--vet); }
        .btn-map { background: #e3f2fd; color: var(--vet); }
        
        /* Esconder idiomas */
        .lang-en { display: none; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <button class="btn btn-lang" onclick="toggleLang()">ğŸ‡ºğŸ‡¸ English / ğŸ‡§ğŸ‡· PortuguÃªs</button>
        <h1 class="lang-pt">ğŸ® BovinoTech Santiago</h1>
        <h1 class="lang-en">ğŸ® Santiago Cow Market</h1>
        <p class="lang-pt">Santiago, RS - Tecnologia para o Campo</p>
        <p class="lang-en">Santiago, RS - Ranching Technology</p>
        
        <a href="https://docs.google.com/forms/d/e/YOUR_FORM_ID/viewform" target="_blank" class="btn btn-add">
            <span class="lang-pt">â• Anunciar Animal</span>
            <span class="lang-en">â• Post a Cow</span>
        </a>
    </header>

    <div id="feed">
        <p style="text-align:center;">Carregando dados da planilha...</p>
    </div>
</div>

<script>
    // Link da sua planilha convertida em CSV para o cÃ³digo ler
    const SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vS_N80X_6f2A4z7Z9p_SByzIe3S7nB9vI7qI8q9n5j7m8z6x-9y9z5_.../pub?output=csv";
    
    // Como ainda nÃ£o publiquei a sua, usei o seu ID de planilha direto
    const PROXY_URL = "https://docs.google.com/spreadsheets/d/1siJAnVoA3KwnoQWYtkB-wODIb1j1_YP2VHC-djXnFtg/gviz/tq?tqx=out:csv";

    let isEnglish = false;

    async function loadCows() {
        try {
            const response = await fetch(PROXY_URL);
            const text = await response.text();
            const rows = text.split('\n').slice(1);
            const feed = document.getElementById('feed');
            feed.innerHTML = '';

            rows.forEach(row => {
                // Remove aspas que o Google Sheets coloca
                const cols = row.split('","').map(c => c.replace(/"/g, ''));
                
                // Mapeamento: 1=Foto, 2=PreÃ§o, 3=Peito(cm), 4=Comprimento(cm), 5=Coords, 6=SaÃºde
                const photo = cols[1];
                const price = cols[2];
                const girth = parseFloat(cols[3]);
                const length = parseFloat(cols[4]);
                const coords = cols[5];
                const health = cols[6] || "SaudÃ¡vel";

                // CÃ¡lculo Brasileiro: (PeitoÂ² * Comprimento) / 11900
                const weight = girth && length ? ((Math.pow(girth, 2) * length) / 11900).toFixed(1) : "---";

                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <img src="${photo}" onerror="this.src='https://via.placeholder.com/400x250?text=Animal+Sem+Foto'">
                    <div class="card-body">
                        <span class="status">${health}</span>
                        <div class="price">R$ ${price}</div>
                        
                        <div class="stats">
                            <div><strong>âš–ï¸ Peso Est.:</strong><br>${weight} kg</div>
                            <div><strong>ğŸ“ Medidas:</strong><br>${girth}x${length} cm</div>
                        </div>

                        <button class="btn btn-vet" onclick="calcVet(${weight})">
                            <span class="lang-pt">ğŸ’‰ Vet: Calcular Dose</span>
                            <span class="lang-en">ğŸ’‰ Vet: Calculate Dose</span>
                        </button>

                        <a href="https://www.google.com/maps?q=${coords}" target="_blank" class="btn btn-map">
                            <span class="lang-pt">ğŸ“ Ver no Google Maps</span>
                            <span class="lang-en">ğŸ“ View on Google Maps</span>
                        </a>
                    </div>
                `;
                feed.prepend(card);
            });
            updateLang();
        } catch (e) {
            document.getElementById('feed').innerHTML = "<p>Planilha conectada! Aguardando o primeiro anÃºncio ser publicado.</p>";
        }
    }

    function calcVet(w) {
        let dose = prompt(isEnglish ? "Dosage (ml per kg):" : "Dosagem (ml por kg):", "0.02");
        if(dose) alert((isEnglish ? "Total Dose: " : "Dose Total: ") + (w * parseFloat(dose)).toFixed(2) + " ml");
    }

    function toggleLang() {
        isEnglish = !isEnglish;
        updateLang();
    }

    function updateLang() {
        document.querySelectorAll('.lang-pt').forEach(el => el.style.display = isEnglish ? 'none' : 'block');
        document.querySelectorAll('.lang-en').forEach(el => el.style.display = isEnglish ? 'block' : 'none');
    }

    loadCows();
</script>
</body>
</html>

