<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BovinoTech Elite | Santiago Precision</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #0a2e1f;
            --accent: #c5a059; /* Ouro envelhecido para luxo agro */
            --success: #2ecc71;
            --surface: #ffffff;
            --bg: #f8fafc;
            --text-main: #1e293b;
        }

        body { font-family: 'Inter', sans-serif; background: var(--bg); margin: 0; color: var(--text-main); overflow-x: hidden; }

        /* Market Ticker Pro */
        .ticker-bar { background: var(--primary); color: rgba(255,255,255,0.9); padding: 12px 0; font-size: 0.75rem; font-weight: 600; letter-spacing: 1px; border-bottom: 2px solid var(--accent); }
        .ticker-wrap { display: flex; overflow: hidden; }
        .ticker-move { display: flex; animation: slide 40s linear infinite; white-space: nowrap; }
        @keyframes slide { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
        .ticker-item { margin-right: 60px; display: flex; align-items: center; }
        .ticker-item span { color: var(--accent); margin-left: 8px; }

        /* Navigation */
        nav { background: var(--surface); padding: 20px 50px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 15px rgba(0,0,0,0.05); }
        .logo { font-weight: 800; font-size: 1.5rem; color: var(--primary); letter-spacing: -1px; }
        .logo span { color: var(--accent); }

        /* Hero Section */
        .hero { background: linear-gradient(135deg, var(--primary) 0%, #154d33 100%); color: white; padding: 60px 20px; text-align: center; clip-path: polygon(0 0, 100% 0, 100% 85%, 0 100%); }
        .hero h1 { font-size: 2.5rem; margin: 0; font-weight: 800; }

        .main-content { max-width: 1200px; margin: -50px auto 50px; padding: 0 20px; }

        /* Stats Dashboard */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: var(--surface); padding: 25px; border-radius: 16px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); border-bottom: 4px solid transparent; transition: 0.3s; }
        .stat-card:hover { border-bottom-color: var(--accent); transform: translateY(-5px); }
        .stat-card small { color: #64748b; font-weight: 600; font-size: 0.7rem; text-transform: uppercase; }
        .stat-card div { font-size: 1.8rem; font-weight: 800; color: var(--primary); margin-top: 5px; }

        /* Map System */
        #map { height: 450px; border-radius: 24px; box-shadow: 0 20px 50px rgba(0,0,0,0.1); border: 8px solid white; margin-bottom: 40px; }

        /* Animal Intelligence Cards */
        .feed-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 30px; }
        .animal-card { background: var(--surface); border-radius: 24px; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.03); border: 1px solid rgba(0,0,0,0.05); transition: 0.4s; }
        .animal-card:hover { box-shadow: 0 30px 60px rgba(0,0,0,0.12); }
        
        .img-container { position: relative; height: 260px; }
        .animal-img { width: 100%; height: 100%; object-fit: cover; }
        .price-badge { position: absolute; bottom: 20px; left: 20px; background: var(--primary); color: white; padding: 8px 18px; border-radius: 12px; font-weight: 800; font-size: 1.2rem; }

        .card-info { padding: 25px; }
        .tag { background: #f1f5f9; color: #475569; padding: 4px 12px; border-radius: 8px; font-size: 0.65rem; font-weight: 700; text-transform: uppercase; }
        
        .grid-data { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 20px 0; }
        .data-point { background: #f8fafc; padding: 12px; border-radius: 12px; border: 1px solid #f1f5f9; }
        .data-point span { display: block; font-size: 0.6rem; color: #94a3b8; font-weight: 700; margin-bottom: 4px; }
        .data-point b { font-size: 1.1rem; color: var(--primary); }

        .btn-elite { display: block; width: 100%; padding: 16px; border-radius: 14px; text-align: center; font-weight: 700; text-decoration: none; transition: 0.3s; cursor: pointer; border: none; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: var(--accent); }
        .btn-outline { background: transparent; border: 2px solid #e2e8f0; color: #64748b; margin-top: 10px; }
    </style>
</head>
<body>

<div class="ticker-bar">
    <div class="ticker-wrap">
        <div class="ticker-move">
            <div class="ticker-item">BOI GORDO RS <span>R$ 315,40</span></div>
            <div class="ticker-item">TERNEIRO 1ª <span>R$ 11,80/kg</span></div>
            <div class="ticker-item">SOJA SANTIAGO <span>R$ 138,50</span></div>
            <div class="ticker-item">DOLAR AGRO <span>R$ 5,12</span></div>
            <div class="ticker-item">BOI GORDO RS <span>R$ 315,40</span></div>
            <div class="ticker-item">TERNEIRO 1ª <span>R$ 11,80/kg</span></div>
        </div>
    </div>
</div>

<nav>
    <div class="logo">BOVINO<span>TECH</span> ELITE</div>
    <div style="font-size: 0.7rem; font-weight: 700; color: #94a3b8;">SANTIAGO, RS • 2026</div>
</nav>

<section class="hero">
    <h1>Precision Ranching Dashboard</h1>
    <p style="opacity: 0.8; font-weight: 300;">Monitoramento de Ativos Biológicos em Tempo Real</p>
</section>

<div class="main-content">
    <div class="stats-grid">
        <div class="stat-card"><small>Inventory Count</small><div id="c-count">--</div></div>
        <div class="stat-card"><small>Average Biomass</small><div id="c-weight">-- kg</div></div>
        <div class="stat-card"><small>Market Valuation</small><div id="c-value">R$ --</div></div>
    </div>

    <div id="map"></div>

    <div id="feed" class="feed-grid">
        </div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    const SHEET_ID = "1siJAnVoA3KwnoQWYtkB-wODIb1j1_YP2VHC-djXnFtg";
    const CSV_URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/export?format=csv&gid=0`;

    const map = L.map('map', {zoomControl: false}).setView([-29.1914, -54.8659], 13);
    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png').addTo(map);

    async function syncEliteData() {
        try {
            const res = await fetch(CSV_URL);
            const text = await res.text();
            const rows = text.split('\n').slice(1);
            const feed = document.getElementById('feed');
            feed.innerHTML = '';

            let tw = 0, tv = 0, count = 0;

            rows.forEach(row => {
                const cols = row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(c => c.replace(/"/g, '').trim());
                if (cols.length < 5) return;

                const [date, foto, preco, peito, comp, coords, saude] = cols;
                const weight = ((Math.pow(parseFloat(peito), 2) * parseFloat(comp)) / 11900).toFixed(1);
                
                count++;
                tw += parseFloat(weight);
                tv += parseFloat(preco.replace('.', '').replace(',', '.'));

                feed.innerHTML += `
                    <div class="animal-card">
                        <div class="img-container">
                            <img src="${foto}" class="animal-img" onerror="this.src='https://images.unsplash.com/photo-1546445317-29f4545e9d53?w=500'">
                            <div class="price-badge">R$ ${preco}</div>
                        </div>
                        <div class="card-info">
                            <span class="tag">Regional Genetics • ${saude || 'Saudável'}</span>
                            <div class="grid-data">
                                <div class="data-point"><span>EST. WEIGHT</span><b>${weight} kg</b></div>
                                <div class="data-point"><span>UNIT SCALE</span><b>${(weight/30).toFixed(1)} @</b></div>
                            </div>
                            <button class="btn-elite btn-primary" onclick="alert('Analysis: Dosagem ${ (weight*0.02).toFixed(2) }ml')">VET ANALYTICS</button>
                            <a href="http://maps.google.com/?q=${coords}" target="_blank" class="btn-elite btn-outline">GEO-TRACKING</a>
                        </div>
                    </div>
                `;

                if(coords) {
                    const [lat, lng] = coords.split(',').map(Number);
                    L.circleMarker([lat, lng], {radius: 8, color: '#0a2e1f', fillColor: '#c5a059', fillOpacity: 0.8}).addTo(map);
                }
            });

            document.getElementById('c-count').innerText = count;
            document.getElementById('c-weight').innerText = (tw/count).toFixed(1) + ' kg';
            document.getElementById('c-value').innerText = 'R$ ' + tv.toLocaleString('pt-BR');

        } catch (e) { console.error(e); }
    }
    syncEliteData();
</script>
</body>
</html>
